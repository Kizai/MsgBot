# 钉钉消息机器人API使用文档

### 修订记录

| 更新日期       | 版本号   | 版本说明                                                                                                                  |
|------------|-------|-----------------------------------------------------------------------------------------------------------------------|
| 2023-03-01  | 1.0.0 | 钉钉消息机器人API使用文档                                                                                               |

### 请求钉钉机器人发送文本信息
以下以部署到本地机器为例：

* 请求地址：`http://localhost:6656/api/v1/text`
* 请求方法：`POST`
* 查询参数说明：

| 序号  | 参数         | 是否必填 | 类型     | 说明                          |
|-----|------------|------|--------|-----------------------------|
| 1   | message    | 是    | string | 消息内容                        |
| 2   | is_at_all  | 否    | string | 是否@钉钉群全部人？ Value:False/True |
| 3   | at_user_id | 否    | string | @群组的某个人                     |

响应参数说明：

| 接口返回码 | 参考                                                                        | 原因                 | 排查方法                |
|-------|---------------------------------------------------------------------------|--------------------|---------------------|
| -1    | {<br>"code": "-1",<br>"message": "Parameter content cannot be empty"<br>} | 消息内容不能为空           | 必要参数的内容不能为空         |
| 0     | {<br>"code": "0",<br>"message": "Request successful"<br>}                 | Request successful | 接口调用成功              |
| 400   | {<br>"code": "400",<br>"message": "Missing parameters"<br>}               | 缺少必要的参数            | 请查看缺少必要的参数`message` |

### 请求钉钉机器人发送link信息

* 请求地址：`http://localhost:6656/api/v1/md`
* 请求方法：`POST`
* 查询参数说明：

| 序号  | 参数          | 是否必填 | 类型     | 说明                                                                 |
|-----|-------------|------|--------|--------------------------------------------------------------------|
| 1   | text        | 是    | string | 消息内容                                                               |
| 2   | message_url | 是    | string | 需要发送的url链接，请使用`http://www.google.com`或者`https://www.google.com`的格式 |
| 3   | at_user_id  | 否    | string | @群组的某个人                                                            |
| 4   | is_at_all   | 否    | string | 是否@钉钉群全部人？ Value:False/True                                        |

响应参数说明：

| 接口返回码 | 参考                                                                        | 原因                 | 排查方法              |
|-------|---------------------------------------------------------------------------|--------------------|-------------------|
| -1    | {<br>"code": "-1",<br>"message": "Parameter content cannot be empty"<br>} | 消息内容不能为空           | 必要参数的内容不能为空       |
| 0     | {<br>"code": "0",<br>"message": "Request successful"<br>}                 | Request successful | 接口调用成功            |
| 400   | {<br>"code": "400",<br>"message": "Missing parameters"<br>}               | 缺少必要的参数            | 请查看缺少必要的参数`text`和`message_url` |

